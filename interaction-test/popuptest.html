<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .popup-bg {
      background-color: rgba(0, 0, 0, 0.8);
      /* color: #fff; */
    }

    .x-bg {
      background-color: #fff;
    }

    .display-none {
      display: none;
    }
  </style>
  <title>Document</title>

</head>

<body>
  <div class="project">
    <section>text+bg</section>
    <section>(surfingboard)click</section>
  </div>

  <script>
    function setSize(elem, width, height) {
      elem.setAttribute('style', `width: ${width}; height: ${height};`);
    }

    function makeDiv() {
      return 'div';
    }

    // img 태그 안에 anchor 태그를 넣어줬나? 기억이 안난다
    function img() {
      return '<img>';
    }

    //   <!-- todo: root를 클릭하면 팝업이 나타나도록 구성해주기 -->
    const projOne = document.getElementsByClassName('project');
    console.log(projOne);

    const projOneLastChild = projOne[0].lastElementChild;
    console.log(projOneLastChild);
    // <!-- todo: 1. 클릭 이벤트를 만들어주고, 화면이 나타나도록 하는데 겹쳐지려면 형제 관계에 있어야 하니까 before, after 등의 메서드를 사용하거나 -->
    // 팝업 나타나게 해주는 부분
    // ----------------------------
    let clickValue;
    projOneLastChild.addEventListener('click', () => {
      clickValue = true;
      console.log(clickValue);
      // <!-- ?문제는 하나만 생기도록 해줘야 한다는 거다 클릭할 때마다가 아니라 => 한번 클릭했을 때만 생기도록 변수를 줬다-->
      if (clickValue === true) {
        // 그냥 팝업을 만들어뒀다가 클릭하면 나타나도록 하면 될 부분이 아닐까?
        popUp.classList.remove('display-none');
      }
      clickValue = false;
    })

    // 팝업 만들어주기 시작하는 부분
    // --------------------------------
    const appendDiv = document.createElement(makeDiv());
    projOne[0].appendChild(appendDiv);
    // <!-- todo: 3. 그 안에 타이틀, 설명, 노션아이콘, 노션 설명, 깃허브 아이콘, 깃허브 설명, X버튼으로 구성되도록 하고 / 3-1. 아이콘 부분은 anchor태그로 구성하되 새로운 창으로 열리도록 타겟 속성을 부여해야 한다 --> 
    const popUpChildArr = [];
    const popUpChild = ['<h1></h1>', '<div></div>', '<a></a><p></p>', '<a></a><p></p>', '<div id="x">'];
    // 1. 만들어 준 자식요소를 식별해주고
    const popUp = projOne[0].lastElementChild;
    // popUp.style.display = 'none';
    // <!-- todo: 2. 나타날 화면은 화면 전체를 덮는다 -->
    // <!--todo: popup 나타나도록 스타일 해줄 부분-->
    setSize(popUp, '100vw', '100vh');
    popUp.style.position = 'absolute';
    popUp.style.top = 0;
    popUp.classList.add('popup-bg');


    console.log(popUp); // 새로 만들어준 div로 식별
    // 2. 새로 만든 배열 안에 구성할 태그의 이름을 담아서, 빈 배열에 push를 해주는 방식으로 빈 배열에 담아서 
    popUpChild.forEach(elem => {
      popUpChildArr.push(elem);
    })
    console.log(popUpChildArr.join(''));
    // 3. innerHTML로 붙여서 자식 요소를 덧붙여준다
    popUp.innerHTML = popUpChildArr.join('');

    // <!--todo: popUp 요소들이 나타날 부분-->
    console.log(popUp.children);
    const popUpItems = popUp.children;
    console.log(popUpItems);
    // popUpItems.forEach((elem, index) => {
    //   if(index === 0){
    //     console.dir(elem[index]);
    //     elem[index].textContent = '프로젝트';
    //   }
    // });
    // <!--?DOM API에 접근하기 위해서는 배열로 접근하면 안되는 건가??-->
    popUpItems[0].textContent = 'Project01. 보라도라';
    popUpItems[1].textContent =
      'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptatem neque provident possimus quasi! Omnis itaque cum voluptatum optio sit soluta labore necessitatibus non. Suscipit obcaecati esse doloribus ipsa at quasi.';
    // a태그 안에 아이콘 이미지를 넣어줘야 이미지 태그를 클릭했을 때 이동하는 것을 만들 수 있음

    // https://developer.mozilla.org/ko/docs/Web/HTML/Element/a
    // !for! or forEach
    // <!--todo: 공통적으로 적용해줘야 할 부분 1. 새창에서 링크가 열리도록 해준다 => target = '_blank', 2. 둘다 img 태그 심어주기(아이콘을 넣어야 함) => innerHTML, appendChild, 3. 크기도 동일하게 정해줘야 한다=>전에는 컨테이너로 묶어줬었는데 -->

    // <!--length를 안 적어줬네-->
    for (let i = 0; i < popUpItems.length; i++) {
      // 인덱스가 2번일 때
      // 인덱스가 4번일 때
      if (i % 2 === 0 && i <= 4 && i > 0) {
        // popUpItems
        console.log(i);
        // <!--todo: img tag를 넣어줄 부분-->
        popUpItems[i].innerHTML = img();
        // img 태그 src로 넣어준 부분 => 크기를 조절해야 함
        setSize(popUpItems[i].firstElementChild, '100px', '100px');
        if (i / 2 === 1) {
          console.dir(popUpItems[i]);
          popUpItems[i].href = 'https://www.notion.so/e-jieun-265effdb10cb4a47a248cbf8bfc18445';
          popUpItems[i].firstElementChild.src = "/img/svg/notion-icon.svg";
        } else {
          console.dir(popUpItems[i]);
          popUpItems[i].href = 'https://github.com/e-jieun';
          popUpItems[i].firstElementChild.src = "/img/svg/github-icon.svg";
        }
      }
    }

    // x버튼 만들고 제어해줄 부분
    //-----------------------------
    // Xbutton
    const xBtn = document.getElementById('x');
    console.log(xBtn);

    // x를 만들어줄 부분
    function xBtnChild() {
      return '<div></div><div></div>'
    }

    xBtn.innerHTML = xBtnChild();
    console.log(xBtn);

    // innerHTML로 생성해준 부분 
    const xBtnChildArr = Array.from(xBtn.children);
    console.log(xBtnChildArr);

    let deg = 45;
    // x만들어 줄 부분
    xBtnChildArr.forEach((elem, index) => {
      setSize(elem, '30px', '1px');
      elem.classList.add('x-bg');
      index = index === 0 ? elem.style.transform = `rotate(${deg}deg)` : elem.style.transform =
      `rotate(-${deg}deg)`;
    });

    xBtn.addEventListener('click', () => {
      console.log(projOne.lastElementChild);
      popUp.classList.add('display-none');
    });
  </script>
</body>

</html>